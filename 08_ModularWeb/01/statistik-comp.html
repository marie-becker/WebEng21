<script type="module">

    import {LitElement, svg, css} from 'https://unpkg.com/lit-element/lit-element.js?module';

    customElements.define('statistik-comp', class extends LitElement {
        constructor() {
            super();
            this.data = {
                "spd": {
                    name: "SPD",
                    sitze: 206,
                    color: "red"
                },
                "cdu/cdsu": {
                    name: "CDU/CSU",
                    sitze: 197,
                    color: "black"
                },
                gruen: {
                    name: "Die Gruenen",
                    sitze: 118,
                    color: "green",
                },
                fdp: {
                    name: "FDP",
                    sitze: 92,
                    color: "yellow",
                },
                afd: {
                    name: "AfD",
                    sitze: 82,
                    color: "#4d2600",
                },
                linke: {
                    name: "Die Linke",
                    sitze: 39,
                    color: "#e60e98",
                },
                franktionslos: {
                    name: "franktionslos",
                    sitze: 2,
                    color: "grey"
                }
            }
            this.y = 30
        }

        static get properties() {
            return {
                data: {type: Object},
                y: {type: Number}
            }
        }
        static get styles(){
            return css`
        .bar{
            animation-name: barAnim;
            animation-duration: 1.5s;
            animation-iteration-count: 1;
            animation-timing-function: ease;
            animation-play-state: running;
        }
        @keyframes barAnim {
            0%{
                width: 0;
            }
        }
            `
        }


        render() {
            return svg`<svg height="500" id="dia" width="600" xmlns="http://www.w3.org/2000/svg">
    <line x1="99" y1="25" x2="99" y2="240" stroke-width="2" stroke="#85adad" /><text x="95" y="260">0</text>
    <line x1="200" y1="25" x2="200" y2="240" stroke-width="2" stroke="#85adad" /><text x="192" y="260">50</text>
    <line x1="300" y1="25" x2="300" y2="240" stroke-width="2" stroke="#85adad" /><text x="288" y="260">100</text>
    <line x1="400" y1="25" x2="400" y2="240" stroke-width="2" stroke="#85adad" /><text x="388" y="260">150</text>
    <line x1="500" y1="25" x2="500" y2="240" stroke-width="2" stroke="#85adad" /><text x="488" y="260">200</text>
    <text font-family='Arial' font-size="12" x="350" y="280">Sitze im deutschen Parlament</text>
    ${Object.values(this.data).map((d, index) => svg`<text font-family='Arial' font-size='14' x='10' y=${this.y+(30*index) + 15}>${d.name}</text>
                <rect class="bar" fill='${d.color}' height='20' width='${d.sitze * 2}' x='100' y='${this.y+(30*index)}'/>
                <text font-family='Arial' font-size='12' font-weight="bold" x='${110 + d.sitze * 2}' y='${this.y +(30*index)+ 15}'>${d.sitze}</text>`)}
</svg>`;
        }
    })

    const demo = document.createElement('statistik-comp');
    document.body.appendChild(demo);

</script>
